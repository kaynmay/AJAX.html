<?xml version = "1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>Register</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>
  body{
    text-align: center;
  }
  .btn{
    width: 90px;
  }
  #textform{
    width: 250px;
    margin: auto;
  }
  #taken{
    color: red;
  }
  </style>
</head>

<body>
  <div>
    <h3>Register</h3><br/>
    <form id="textform" method="get" action="loginProcess.php" onsubmit="">
      <div class="form-group">
        <span id="taken"></span></br>
          Username:
        <input id = "input"  onchange = "checkUser(this.value);" class="form-control" type="text" name="username"/>
      </div>
      <div class="form-group">
        Password:
        <input id = "input" class="form-control" type="password" name="password"/>
      </div>
      <div id="button">
        <input class="btn btn-default" type="submit" value="Register"/>
        <input class="btn btn-default" type="reset" value="Reset"/>
      </div>
    </form>
  </div>

  <script>
  function checkUser(user){
    var xhttp;
    if (window.ActiveXObject)
    {
      xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    else if (window.XMLHttpRequest)
    {
      xhttp = new XMLHttpRequest();
    }

    xhttp.onreadystatechange = updatePage;

    function updatePage(){
      if (xhttp.readyState == 4 && xhttp.status == 200) {
        var match = xhttp.responseText;
        if (match == true){
          document.getElementById("taken").innerHTML = "Username already taken.";
        }
        else{
          document.getElementById("taken").innerHTML = "";
        }
      }
    }
    xhttp.open("GET", "checkUser.php?user="+escape(user), true);
    xhttp.send();
  }
  </script>
</body>
</html>
